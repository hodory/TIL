# 200420

## 팩토리 패턴

객체를 생성하는 역할을 하는 클래스를 만드는 패턴으로, 비즈니스 로직을 캡슐화 시킨다.

이와 같이 구현 할 경우 객체 생성의 재활용과 테스트가 용이해지고, 로직 변경에서 한곳만 변경하면 되므로 간결해진다.

정적 팩토리는 의존성의 문제가 있으므로 유의해서 사용하자

### 팩토리 유형

#### 팩토리 메서드 패턴

인터페이스만 정의하여 어떤 클래스를 인스턴스화 할지 하위클래스가 결정하도록 하는 패턴.

<!-- 클래스가 어떤 종류의 객체들을 사용하고 있고, 어떤 객체가 필요한지 모를때 사용. -->

#### 추상 팩토리 패턴

구체 클래스를 지정하지않고 관련 객체 혹은 종속 객체 군을 생성하기 위한 인터페이스를 제공

- 팩토리를 사용할 **클라이언트 코드** (승용차를 만든다. 트럭을 만든다.)
- 실제 생성될 객체의 구조가 정의된 **인터페이스** (승용차와 트럭의 구조)
- 객체 인터페이스를 구현한 **구현체** (`현대` 브랜드의 승용차, `현대` 브랜드의 트럭, `기아` 브랜드의 승용차, `기아` 브랜드의 트럭의 정의)
- 객체가 어떻게 만들어져야 하는지에 대한 인터페이스인 **추상 팩토리** (각 브랜드의 승용차와 트럭을 만들기 위한 정의)
- 추상 팩토리 인터페이스를 구현하고, 객체를 생성하는 **팩토리 구현체** (각 브랜드의 승용차/트럭을 조립 라인에 맞게 생산해내는 생산라인)

생성하는 시스템으로 부터 각 객체들이 독립적으로 생성될 필요가 있을때 유용하므로, 하나의 객체만 만들때는 적합하지 않다.

추상 팩토리 패턴은 실제로 팩토리 메서드 패턴을 사용한다.

## 참고서적

[클린 아키텍처 인 PHP](https://leanpub.com/cleanphp-korean)